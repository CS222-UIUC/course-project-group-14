#from asyncore import file_dispatcher
from flask import *

app = Flask(__name__,  static_url_path='/static')

@app.route("/") # homepage
def home():
    return render_template("homepage.html")

@app.route("/success", methods = ["POST"]) #parsing was successful and is in progress
def success():
    global file
    f = request.files['file']
    file = f.filename
    f.save(file)
    return render_template("currently_parsing.html", name = file)

@app.route('/complete') # parsing is done, CSV can be downloaded
def complete():
    return render_template("complete.html")

@app.route('/download') # allows downloading
def download_file():
    path = "test.csv"
    return send_file(path, as_attachment=True)

if __name__ == "__main__":
    app.run(debug = True)
